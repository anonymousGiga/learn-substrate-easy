# 钩子函数的使用

# 1 背景知识
## 1.1 交易到打包的过程


## 1.2 substrate中的执行过程
  参考https://docs.substrate.io/v3/concepts/execution/#initializing-a-block
  
# 2 hooks介绍 
```
pub trait Hooks<BlockNumber> {
    fn on_finalize(_n: BlockNumber) { ... }
    fn on_idle(_n: BlockNumber, _remaining_weight: Weight) -> Weight { ... }
    fn on_initialize(_n: BlockNumber) -> Weight { ... }
    fn on_runtime_upgrade() -> Weight { ... }
    fn pre_upgrade() -> Result<(), &'static str> { ... }
    fn post_upgrade() -> Result<(), &'static str> { ... }
    fn offchain_worker(_n: BlockNumber) { ... }
    fn integrity_test() { ... }
}
```
每个钩子函数在对应的时间自动调用执行，开发者可以根据需要在这些钩子函数中添加业务逻辑。

# 3 示例

# 4 参考文档

# 5 完整源码
